# 多租户容器数据库和可插拔数据

## 数据库和实例

### 数据库

数据库名
```sql
SQL> show parameters db_name
```

ASM
```
# su - grid
$ asmcmd
ASMCMD> cd +DATA/OCP19CDB/
ASMCMD> ls
```

数据文件
```sql
SQL> SELECT name FROM v$datafile;
```

重做日志文件
```sql
SQL> SELECT * FROM v$log;
```

参数文件
```sql
SQL> show parameters spfile
```

临时文件
```sql
SQL> SELECT * FROM v$tempfile;
```

表空间
```sql
SQL> SELECT * FROM v$tablespace;
```

### 实例

实例名
```sql
SQL> show parameters instance_name
```

内存
```sql
SQL> show parameters target
```

进程
```
# ps -ef | grep ora_
```

## 多租户容器数据库体系结构

||CON_ID|CON_NAME|
|:-|:-|:-|
|非CDB|0|-|
|CDB|1|CDB$ROOT|
|种子 PDB|2|PDB\$SEED|
|PDB|3、4、5……|PDB\$XXX|

用户容器称为可插拔数据库（PDB）

```SQL
SQL> show pdbs
SQL> show con_name
SQL> show con_id
```

### 物理级别的区别

system/sysaux 不共享
重做日志文件 共享
归档模式 共享
控制文件 共享
undo 共享/不共享
临时文件 不共享
参数文件 共享
告警日志和跟踪文件 共享
时区 共享/不共享
字符集 共享/不共享

### CDB 的组成

#### 根容器 （CBD$ROOT）

#### CDB seed （PDB$SEED）

#### 可插拔数据库容器（PDB）

个数限制
- 12.1 中：一个 CDB 中最多 253 个 PDB（包括种子）
- 12.2 中：一个 CDB 中最多 4097 个 PDB（包括种子）