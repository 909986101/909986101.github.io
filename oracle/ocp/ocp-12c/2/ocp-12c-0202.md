# 使用 DBCA 创建 Oracle 数据库

## 使用数据库配置助手（DBCA）创建数据库

### 实例、数据库和数据字典

Oracle 服务器由实例和数据库构成。二者是独立的，但又联系在一起。实例是 RAM 和 CPU 中的内存结构和进程，其存在是暂时的，用户可以启动和停止实例。数据库由磁盘上的文件组成，一旦创建，它将永久存在，直到删除为止。创建实例只不过就是创建内存结构并启动进程。创建数据库的任务由实例一次性完成，此后，实例可以多次打开和关闭数据库。如果离开了实例，数据库将无法访问。

在数据库中，有一组称为“数据字典（data dictionary）”的表和其他对象。数据字典描述数据库中的所有逻辑和物理结构，其中包括存储用户数据的所有段。创建数据库的过程就是创建存储数据字典需要的最小限度的物理结构，然后在其中创建数据字典。

实例由实例参数文件（parameter file）定义。参数文件包含着定义内存中实例构建方式（包括内存结构的大小和后台进程的行为）的指令。构建实例后，实例将处于“未安装（no mount）”模式。在此模式中，实例是存在的，但没有连接到数据库。实际上，此时可能并不存在数据库。

所有参数（通过参数文件指定，或隐式指定）都具有默认值，但 DB_NAME 参数例外。DB_NAME 参数给出实例将连接到的数据库的名称。此名称也嵌入在控制文件中。由 CONTROL_FILES 参数将控制文件的位置告知实例。此参数定义实例和数据库之间的连接。当实例读取控制文件时（通过读取 CONTROL_FILES 参数来查找或依赖默认值），如果数据库名称不匹配，将不会安装数据库。mount 模式表明实例已经成功的连接到控制文件。如果控制文件受损或不存在，将无法安装数据库。

控制文件包含指向构成数据库其余部分的其他文件（联机重做日志文件和数据文件）的指针。安装数据库后，实例通过查找并打开其他文件来打开数据库。所谓打开的数据库，即实例已打开了所有可用联机重做日志文件和数据文件的数据库。控制文件中包括数据文件和表空间的映射。这允许实例确定构建 SYSTEM 表空间的数据文件。在 SYSTEM 表空间中，它将找到数据字典。使用数据字典，实例可以将 SQL 代码中提到的对象的引用解析为引用所在的段，然后计算出这些对象的物理位置。

在创建数据库服务器时，必须执行以下步骤
1. 创建实例
2. 创建数据库
3. 创建数据字典

与数据库一起创建的数据字典功能完备，但并无用处。它不能供人使用，因为它的结构过于晦涩难懂。基于数据字典创建一组视图，从而以人们能够理解的方式呈现数据字典。还需要许多 PL/SQL 包来添加功能。

通过运行 `ORACLE_HOME/rdbms/admin` 目录中的一组 SQL 脚本来创建数据字典本身。第一个被调用的是 sql.bsq，此脚本将接着调用其他多个脚本。这些脚本发出一系列命令，来创建构成数据字典的所有表和其他对象。

`ORACLE_HOME/rdbms/admin` 目录中的其他脚本（前缀为 cat）生成使数据库可以使用的视图和其他对象。

### 使用 DBCA 创建数据库